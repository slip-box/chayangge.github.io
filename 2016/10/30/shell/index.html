<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> shell · 插秧哥's Blog</title><meta name="description" content="shell - 插秧哥"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://chayangge.com/atom.xml" title="插秧哥's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/chayangge" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">shell</h1><div class="post-info">Oct 30, 2016</div><div class="post-content"><h2 id="常用shell收集"><a href="#常用shell收集" class="headerlink" title="常用shell收集"></a>常用shell收集</h2><h3 id="查看磁盘信息-du-df"><a href="#查看磁盘信息-du-df" class="headerlink" title="查看磁盘信息(du,df)"></a>查看磁盘信息(du,df)</h3><p>查看文件大小并排序  -h: –human-readable。–max-depth=1 限定目录<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du --max-depth=1 -h</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>df查看特殊分区加-a<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df -h</span><br><span class="line">df -ah</span><br></pre></td></tr></table></figure></p>
<p>清空文件夹内容，但不删除文件夹，文件夹里执行：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf  *</span><br></pre></td></tr></table></figure></p>
<h3 id="磁盘格式化（mkfs：make-file-system）"><a href="#磁盘格式化（mkfs：make-file-system）" class="headerlink" title="磁盘格式化（mkfs：make file system）"></a>磁盘格式化（mkfs：make file system）</h3><p>linux文件系统格式常用的有：ext2、ext3、vfat。若用ext3格式化/dev/xvdc1分区，执行：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext3/dev/xvdc1</span><br></pre></td></tr></table></figure></p>
<h3 id="磁盘检测-fsck"><a href="#磁盘检测-fsck" class="headerlink" title="磁盘检测(fsck)"></a>磁盘检测(fsck)</h3><p>强制(-f)检测/dev/xvdc1分区文件系统是否有错：(-t指定分五的文件类型，-C显示进度条)<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fsck -C -f -t ext3</span><br></pre></td></tr></table></figure></p>
<p>检测磁盘坏道(-sv表示在屏幕上显示进度条，但此命令在mac上无效)：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">badblocks -sv</span><br></pre></td></tr></table></figure></p>
<h3 id="简单的文件管理"><a href="#简单的文件管理" class="headerlink" title="简单的文件管理"></a>简单的文件管理</h3><p>cd不带参数等同于cd ~  回到主目录<br>cd .. 上级<br>cd ../.. 上上级目录</p>
<h4 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h4><p>mkdir data<br>mkdir data/app 当前目录data下创建app<br>mkdir /home/bill/data/app  按绝对路径创建<br>mkdir -p data/app 加-p表示如果路径不存在data则连父文件夹data一并创建</p>
<h4 id="复制文件-（cp）"><a href="#复制文件-（cp）" class="headerlink" title="复制文件 （cp）"></a>复制文件 （cp）</h4><p>cp a.text b.text 当前目录下复制a并命名为b.text<br>cp a.text ../ 复制a到上层目录<br>cp a.text ../data/  把当前目录下的a.text复制到上一级目录data目录下<br>cp a.text ../data/b.text 把当前目录下的a.text复制到上一级目录data目录下,并命名为b<br>cd -r /data  加-r表示复制data目录及目录下所有文件</p>
<h4 id="移动文件（mv-包含重命名）"><a href="#移动文件（mv-包含重命名）" class="headerlink" title="移动文件（mv 包含重命名）"></a>移动文件（mv 包含重命名）</h4><p>重命名： mv a.text b.text<br>mv 操作同cp类似</p>
<h4 id="删除文件-（rm）"><a href="#删除文件-（rm）" class="headerlink" title="删除文件 （rm）"></a>删除文件 （rm）</h4><p>rm a.text 删除当前目录下a.text （mac下无提示）<br>rm -f a.text 强制删除，无提示<br>rm -r test 删除test文件夹及内容，不带-r 提示test为目录<br>rm -rf test 强制删除test文件夹与内容</p>
<h4 id="读文件-（cat-more-less-head-tail）"><a href="#读文件-（cat-more-less-head-tail）" class="headerlink" title="读文件 （cat more less head tail）"></a>读文件 （cat more less head tail）</h4><p>cat a.text b.text 屏幕打印显示a，b（连续打印，会填满屏幕，不人性化）<br>more 会一屛一屏的输出，用空格键翻页<br>less 和more类似，但less支持命令模式，输入b上滚一屏，d下滚<br>head 查看文件头<br>head -5 a.text 查看a的前五行<br>tail -5 a.text 查看后五行</p>
<h3 id="打包和解压-（tar）"><a href="#打包和解压-（tar）" class="headerlink" title="打包和解压 （tar）"></a>打包和解压 （tar）</h3><h4 id="打包-cf"><a href="#打包-cf" class="headerlink" title="打包 -cf"></a>打包 -cf</h4><p>tar -cf test.zip * 把当期那文件夹下所有文件压缩成test.zip内<br>tar -cf test.rar a.text b.text 把a，b两个文件打包成test.rar</p>
<h4 id="解压-xf"><a href="#解压-xf" class="headerlink" title="解压 -xf"></a>解压 -xf</h4><p>tar -xf test.rar 提取文件到当前目录</p>
<h2 id="后补充-2017-02-06"><a href="#后补充-2017-02-06" class="headerlink" title="后补充 2017-02-06"></a>后补充 2017-02-06</h2><h3 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget url/img  //下载网页或图片</span><br><span class="line">wget --mirror chayangge.com // 下载整站的资源</span><br><span class="line">wget -t 5 url  // 中断后重新尝试5次</span><br></pre></td></tr></table></figure>
<h3 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl chayangge.com //下载输出到终端显示</span><br><span class="line">curl chayangge.com -o text.txt --progress //下载后写入index.txt文件，并显示进度 （--progress）</span><br></pre></td></tr></table></figure>
<h3 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h3><p>功能强大的sed结合正则，简直无敌:<br>把test.txt中的所有aa字符替换（s）为bb<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed "s/aa/bb/g" test.txt</span><br></pre></td></tr></table></figure></p>
<h3 id="查看、杀死进程"><a href="#查看、杀死进程" class="headerlink" title="查看、杀死进程"></a>查看、杀死进程</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep node  // 找出node进程，kill掉PID</span><br></pre></td></tr></table></figure>
<p>mac下：终端运行命令 top 可查看进程，记住前面的PID，杀死进程：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill 进程ID</span><br></pre></td></tr></table></figure></p>
<h3 id="查看文件个数"><a href="#查看文件个数" class="headerlink" title="查看文件个数"></a>查看文件个数</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l |grep "^-"|wc -l</span><br></pre></td></tr></table></figure>
<p>或<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l |wc -l</span><br></pre></td></tr></table></figure></p>
</div></article></div></main><footer><div class="paginator"><a href="/2016/11/30/vue父子组件之间通信/" class="prev">上一篇</a><a href="/2016/10/05/推荐：项目树生成工具/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'seansun';
var disqus_identifier = '2016/10/30/shell/';
var disqus_title = 'shell';
var disqus_url = 'http://chayangge.com/2016/10/30/shell/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//seansun.disqus.com/count.js" async></script><div class="copyright"><p>© 2014 - 2021 <a href="http://chayangge.com">插秧哥</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>